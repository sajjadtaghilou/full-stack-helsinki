{"ast":null,"code":"import _slicedToArray from \"/Users/sajjadtaghilou/Desktop/WEB/full-stack-helsinki/PART 2/phonebook/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/sajjadtaghilou/Desktop/WEB/full-stack-helsinki/PART 2/phonebook/src/components/PersonForm.js\";\nimport React, { useState } from \"react\";\nimport personsService from \"../services/Persons\";\n\nconst PersonForm = ({\n  persons,\n  onPersonSuccess,\n  onError\n}) => {\n  const _useState = useState(\"\"),\n        _useState2 = _slicedToArray(_useState, 2),\n        newName = _useState2[0],\n        setNewName = _useState2[1];\n\n  const _useState3 = useState(\"\"),\n        _useState4 = _slicedToArray(_useState3, 2),\n        newNumber = _useState4[0],\n        setNewNumber = _useState4[1];\n\n  const onNameChange = event => {\n    setNewName(event.target.value);\n  };\n\n  const onNumberChange = event => {\n    setNewNumber(event.target.value);\n  }; /// addPerson\n\n\n  const addPerson = async event => {\n    const personObject = await personsService.create({\n      name: newName,\n      number: newNumber\n    });\n    onPersonSuccess(persons.concat(personObject), \"Added \".concat(newName));\n    setNewName(\"\");\n    setNewNumber(\"\");\n  };\n\n  const findExistingPerson = newName => {\n    return persons.find(person => person.name === newName);\n  }; //update person info\n\n\n  const updatePerson = (nameMatch, personObject) => {\n    if (window.confirm(\"\".concat(personObject.name, \" is already added to phonebook, replace the old number with the new one?\"))) {\n      personsService.update(nameMatch.id, personObject).then(() => {\n        personsService.getAll().then(updatedPersons => {\n          onPersonSuccess(updatedPersons, \"Updated \".concat(personObject.name, \"'s info\"));\n        }).catch(error => {\n          onError(personObject);\n        });\n      }).catch(error => {\n        onError(personObject);\n      });\n    } else {\n      setNewName(\"\");\n      setNewNumber(\"\");\n    }\n  }; //handle data\n\n\n  const handleData = event => {\n    event.preventDefault();\n    const nameObject = {\n      name: newName,\n      number: newNumber\n    };\n    const personMatch = findExistingPerson(newName);\n    personMatch === undefined ? addPerson(nameObject) : updatePerson(personMatch, nameObject);\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    onSubmit: handleData,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, \"name: \", React.createElement(\"input\", {\n    value: newName,\n    onChange: onNameChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, \"number: \", React.createElement(\"input\", {\n    value: newNumber,\n    onChange: onNumberChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, \"add\")));\n};\n\nexport default PersonForm;","map":{"version":3,"sources":["/Users/sajjadtaghilou/Desktop/WEB/full-stack-helsinki/PART 2/phonebook/src/components/PersonForm.js"],"names":["React","useState","personsService","PersonForm","persons","onPersonSuccess","onError","newName","setNewName","newNumber","setNewNumber","onNameChange","event","target","value","onNumberChange","addPerson","personObject","create","name","number","concat","findExistingPerson","find","person","updatePerson","nameMatch","window","confirm","update","id","then","getAll","updatedPersons","catch","error","handleData","preventDefault","nameObject","personMatch","undefined"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport personsService from \"../services/Persons\";\n\nconst PersonForm = ({ persons, onPersonSuccess, onError }) => {\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const onNameChange = event => {\n    setNewName(event.target.value);\n  };\n\n  const onNumberChange = event => {\n    setNewNumber(event.target.value);\n  };\n\n  /// addPerson\n  const addPerson = async event => {\n    const personObject = await personsService.create({\n      name: newName,\n      number: newNumber\n    });\n\n    onPersonSuccess(persons.concat(personObject), `Added ${newName}`);\n    setNewName(\"\");\n    setNewNumber(\"\");\n  };\n  const findExistingPerson = newName => {\n    return persons.find(person => person.name === newName);\n  };\n\n  //update person info\n  const updatePerson = (nameMatch, personObject) => {\n    if (\n      window.confirm(\n        `${personObject.name} is already added to phonebook, replace the old number with the new one?`\n      )\n    ) {\n      personsService\n        .update(nameMatch.id, personObject)\n        .then(() => {\n          personsService\n            .getAll()\n            .then(updatedPersons => {\n              onPersonSuccess(\n                updatedPersons,\n                `Updated ${personObject.name}'s info`\n              );\n            })\n            .catch(error => {\n              onError(personObject);\n            });\n        })\n        .catch(error => {\n          onError(personObject);\n        });\n    } else {\n      setNewName(\"\");\n      setNewNumber(\"\");\n    }\n  };\n\n  //handle data\n  const handleData = event => {\n    event.preventDefault();\n    const nameObject = {\n      name: newName,\n      number: newNumber\n    };\n    const personMatch = findExistingPerson(newName);\n    personMatch === undefined\n      ? addPerson(nameObject)\n      : updatePerson(personMatch, nameObject);\n  };\n\n  return (\n    <div>\n      <form onSubmit={handleData}>\n        <div>\n          name: <input value={newName} onChange={onNameChange} />\n        </div>\n        <div>\n          number: <input value={newNumber} onChange={onNumberChange} />\n        </div>\n        <button type=\"submit\">add</button>\n      </form>\n    </div>\n  );\n};\nexport default PersonForm;\n"]},"metadata":{},"sourceType":"module"}